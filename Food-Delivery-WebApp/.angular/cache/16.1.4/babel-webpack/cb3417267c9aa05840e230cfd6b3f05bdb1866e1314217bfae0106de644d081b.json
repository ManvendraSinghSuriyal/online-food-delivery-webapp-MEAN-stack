{"ast":null,"code":"import { BehaviorSubject, tap } from 'rxjs';\nimport { User } from '../shared/models/User';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class UserService {\n  constructor(http) {\n    this.http = http;\n    this.loginUrl = \"http://localhost:5000/api/users/login\";\n    this.userSubject = new BehaviorSubject(this.getUserFromLocalStorage());\n    this.userObservable = this.userSubject.asObservable();\n  }\n  loginUser(userLogin) {\n    return this.http.post(`${this.loginUrl}`, userLogin).pipe(tap({\n      next: user => {\n        alert('login success');\n        this.setUsertoLocalStorage(user);\n      },\n      error: errorResponse => {\n        alert('login failed');\n      }\n    }));\n  }\n  setUsertoLocalStorage(user) {\n    localStorage.setItem('user', JSON.stringify(user));\n  }\n  getUserFromLocalStorage() {\n    const userJson = localStorage.getItem('user');\n    if (userJson) return JSON.parse(userJson);\n    return new User();\n  }\n  logout() {\n    this.userSubject.next(new User());\n    localStorage.removeItem('user');\n    window.location.reload();\n  }\n}\nUserService.ɵfac = function UserService_Factory(t) {\n  return new (t || UserService)(i0.ɵɵinject(i1.HttpClient));\n};\nUserService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: UserService,\n  factory: UserService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"names":["BehaviorSubject","tap","User","UserService","constructor","http","loginUrl","userSubject","getUserFromLocalStorage","userObservable","asObservable","loginUser","userLogin","post","pipe","next","user","alert","setUsertoLocalStorage","error","errorResponse","localStorage","setItem","JSON","stringify","userJson","getItem","parse","logout","removeItem","window","location","reload","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["D:\\Projects\\Angular Projects\\OnlineFoodDelivery_WebApplication\\Food-Delivery-WebApp\\src\\app\\services\\user.service.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable, tap } from 'rxjs';\nimport { User } from '../shared/models/User';\nimport { UserLogin } from '../shared/interfaces/UserLogin';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserService {\n\nloginUrl=\"http://localhost:5000/api/users/login\"\n\nprivate userSubject=new BehaviorSubject<User>(this.getUserFromLocalStorage());\n\npublic userObservable:Observable<User>\n\n  constructor(private http:HttpClient) {\n\n    this.userObservable=this.userSubject.asObservable()\n   }\n\n\n\n  loginUser(userLogin:UserLogin){\n\n   return this.http.post<User>(`${this.loginUrl}`,userLogin).pipe(tap({\n    next:(user)=>{\n      alert('login success')\n      this.setUsertoLocalStorage(user)\n      \n    },\n    error:(errorResponse)=>{\n      alert('login failed')\n    }\n   \n  \n    \n   }))\n\n\n  }\n\n  setUsertoLocalStorage(user:User){\n\n\n\n    localStorage.setItem('user',JSON.stringify(user))\n  }\n\n  getUserFromLocalStorage(){\n\n    const userJson= localStorage.getItem('user')\n    if(userJson)\n    return JSON.parse(userJson) as User\n\n    return new User();\n  }\n\n\n  logout(){\n    this.userSubject.next(new User());\n    localStorage.removeItem('user')\n    window.location.reload();\n\n\n  }\n\n\n}\n"],"mappings":"AAEA,SAASA,eAAe,EAAcC,GAAG,QAAQ,MAAM;AACvD,SAASC,IAAI,QAAQ,uBAAuB;;;AAM5C,OAAM,MAAOC,WAAW;EAQtBC,YAAoBC,IAAe;IAAf,KAAAA,IAAI,GAAJA,IAAI;IAN1B,KAAAC,QAAQ,GAAC,uCAAuC;IAExC,KAAAC,WAAW,GAAC,IAAIP,eAAe,CAAO,IAAI,CAACQ,uBAAuB,EAAE,CAAC;IAMzE,IAAI,CAACC,cAAc,GAAC,IAAI,CAACF,WAAW,CAACG,YAAY,EAAE;EACpD;EAIDC,SAASA,CAACC,SAAmB;IAE5B,OAAO,IAAI,CAACP,IAAI,CAACQ,IAAI,CAAO,GAAG,IAAI,CAACP,QAAQ,EAAE,EAACM,SAAS,CAAC,CAACE,IAAI,CAACb,GAAG,CAAC;MAClEc,IAAI,EAAEC,IAAI,IAAG;QACXC,KAAK,CAAC,eAAe,CAAC;QACtB,IAAI,CAACC,qBAAqB,CAACF,IAAI,CAAC;MAElC,CAAC;MACDG,KAAK,EAAEC,aAAa,IAAG;QACrBH,KAAK,CAAC,cAAc,CAAC;MACvB;KAIA,CAAC,CAAC;EAGJ;EAEAC,qBAAqBA,CAACF,IAAS;IAI7BK,YAAY,CAACC,OAAO,CAAC,MAAM,EAACC,IAAI,CAACC,SAAS,CAACR,IAAI,CAAC,CAAC;EACnD;EAEAR,uBAAuBA,CAAA;IAErB,MAAMiB,QAAQ,GAAEJ,YAAY,CAACK,OAAO,CAAC,MAAM,CAAC;IAC5C,IAAGD,QAAQ,EACX,OAAOF,IAAI,CAACI,KAAK,CAACF,QAAQ,CAAS;IAEnC,OAAO,IAAIvB,IAAI,EAAE;EACnB;EAGA0B,MAAMA,CAAA;IACJ,IAAI,CAACrB,WAAW,CAACQ,IAAI,CAAC,IAAIb,IAAI,EAAE,CAAC;IACjCmB,YAAY,CAACQ,UAAU,CAAC,MAAM,CAAC;IAC/BC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;EAG1B;;AAzDW7B,WAAW,C;mBAAXA,WAAW,EAAA8B,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;AAAA;AAAXjC,WAAW,C;SAAXA,WAAW;EAAAkC,OAAA,EAAXlC,WAAW,CAAAmC,IAAA;EAAAC,UAAA,EAFV;AAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}