{"ast":null,"code":"import { icon, map, marker, tileLayer } from 'leaflet';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/live-location.service\";\nconst _c0 = [\"map\"];\nexport class MapComponent {\n  constructor(liveLocationService) {\n    this.liveLocationService = liveLocationService;\n    this.DEFAULTLATLNG = [30.0869, 78.2676];\n    this.MARKER_ZOOM = 16;\n    this.MARKER_ICON = icon({\n      iconUrl: '/assets/images/location.png',\n      iconSize: [42, 42],\n      iconAnchor: [21, 42]\n    });\n  }\n  ngOnInit() {\n    this.showMap();\n  }\n  showMap() {\n    if (this.map) return;\n    this.map = map(this.mapRef.nativeElement, {\n      attributionControl: false\n    }).setView(this.DEFAULTLATLNG, 12);\n    tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(this.map);\n    this.map.on('click', e => {\n      this.setMarker(e.latlng);\n    });\n  }\n  search() {\n    this.liveLocationService.getCurrentLocation().subscribe({\n      next: latlng => {\n        console.log(latlng);\n        this.map.setView(latlng, this.MARKER_ZOOM);\n        this.setMarker(latlng);\n      }\n    });\n  }\n  setMarker(latlng) {\n    this.addressLatLng = latlng;\n    if (this.currentMarker) {\n      this.currentMarker.setLatLng(latlng);\n      return;\n    }\n    this.currentMarker = marker(latlng, {\n      draggable: true,\n      icon: this.MARKER_ICON\n    }).addTo(this.map);\n    this.currentMarker.on('dragend', () => {\n      this.addressLatLng = this.currentMarker.getLatLng();\n    });\n  }\n  set addressLatLng(latlng) {\n    if (!latlng.lat.toFixed) return;\n    latlng.lat = parseFloat(latlng.lat.toFixed(8));\n    latlng.lng = parseFloat(latlng.lng.toFixed(8));\n    this.order.addressLatLng = latlng;\n    console.log(this.order.addressLatLng);\n  }\n}\nMapComponent.ɵfac = function MapComponent_Factory(t) {\n  return new (t || MapComponent)(i0.ɵɵdirectiveInject(i1.LiveLocationService));\n};\nMapComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MapComponent,\n  selectors: [[\"app-map\"]],\n  viewQuery: function MapComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.mapRef = _t.first);\n    }\n  },\n  inputs: {\n    order: \"order\"\n  },\n  decls: 5,\n  vars: 0,\n  consts: [[1, \"container\", 2, \"width\", \"30rem\", \"height\", \"20rem\", \"position\", \"relative\"], [1, \"btn\", \"search\", 3, \"click\"], [1, \"map\", 2, \"width\", \"100%\", \"height\", \"100%\"], [\"map\", \"\"]],\n  template: function MapComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function MapComponent_Template_button_click_1_listener() {\n        return ctx.search();\n      });\n      i0.ɵɵtext(2, \" Search My Location\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(3, \"div\", 2, 3);\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\".search[_ngcontent-%COMP%]{\\nposition:absolute;\\ntop: 0;\\nleft: 50%;\\ntransform: translateX(-50%); \\n\\npadding: 10px 15px;\\n\\nborder: none;\\nborder-radius: 5px;\\ncursor: pointer;\\n    z-index: 9999;\\n    background-color: rgba(0, 123, 255, 0.3); \\n\\n    color: #121212; \\n  \\n    border: 1px solid black;\\n    transition: background-color 0.3s, color 0.3s;\\n    \\n\\n    \\n }\\n\\n .search[_ngcontent-%COMP%]:hover{\\n    background-color: #007bff;\\n    color: #fff; }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9tYXAvbWFwLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxpQkFBaUI7QUFDakIsTUFBTTtBQUNOLFNBQVM7QUFDVCwyQkFBMkIsRUFBRSx5Q0FBeUM7QUFDdEUsa0JBQWtCOztBQUVsQixZQUFZO0FBQ1osa0JBQWtCO0FBQ2xCLGVBQWU7SUFDWCxhQUFhO0lBQ2Isd0NBQXdDLEVBQUUsK0JBQStCO0lBQ3pFLGNBQWM7O0lBRWQsdUJBQXVCO0lBQ3ZCLDZDQUE2QztJQUM3QyxrQkFBa0I7O0NBRXJCOztDQUVBO0lBQ0cseUJBQXlCO0lBQ3pCLFdBQVcsRUFBRSIsInNvdXJjZXNDb250ZW50IjpbIi5zZWFyY2h7XHJcbnBvc2l0aW9uOmFic29sdXRlO1xyXG50b3A6IDA7XHJcbmxlZnQ6IDUwJTtcclxudHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOyAvKiBDZW50ZXIgYWxpZ24gdGhlIGJ1dHRvbiBob3Jpem9udGFsbHkgKi9cclxucGFkZGluZzogMTBweCAxNXB4O1xyXG5cclxuYm9yZGVyOiBub25lO1xyXG5ib3JkZXItcmFkaXVzOiA1cHg7XHJcbmN1cnNvcjogcG9pbnRlcjtcclxuICAgIHotaW5kZXg6IDk5OTk7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDEyMywgMjU1LCAwLjMpOyAvKiBQYXJ0aWFsbHkgdHJhbnNwYXJlbnQgYmx1ZSAqL1xyXG4gICAgY29sb3I6ICMxMjEyMTI7IFxyXG4gIFxyXG4gICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XHJcbiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuM3MsIGNvbG9yIDAuM3M7XHJcbiAgICAvKiBtYXJnaW46IGF1dG87ICovXHJcbiAgICBcclxuIH1cclxuXHJcbiAuc2VhcmNoOmhvdmVye1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzAwN2JmZjtcclxuICAgIGNvbG9yOiAjZmZmOyB9Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["icon","map","marker","tileLayer","MapComponent","constructor","liveLocationService","DEFAULTLATLNG","MARKER_ZOOM","MARKER_ICON","iconUrl","iconSize","iconAnchor","ngOnInit","showMap","mapRef","nativeElement","attributionControl","setView","addTo","on","e","setMarker","latlng","search","getCurrentLocation","subscribe","next","console","log","addressLatLng","currentMarker","setLatLng","draggable","getLatLng","lat","toFixed","parseFloat","lng","order","i0","ɵɵdirectiveInject","i1","LiveLocationService","selectors","viewQuery","MapComponent_Query","rf","ctx","ɵɵelementStart","ɵɵlistener","MapComponent_Template_button_click_1_listener","ɵɵtext","ɵɵelementEnd","ɵɵelement"],"sources":["D:\\Projects\\Angular Projects\\OnlineFoodDelivery_WebApplication\\Food-Delivery-WebApp\\src\\app\\components\\map\\map.component.ts","D:\\Projects\\Angular Projects\\OnlineFoodDelivery_WebApplication\\Food-Delivery-WebApp\\src\\app\\components\\map\\map.component.html"],"sourcesContent":["import { Component, ElementRef, Input, OnInit, ViewChild } from '@angular/core';\nimport { LatLng, LatLngExpression, LatLngTuple, LeafletMouseEvent, Map, Marker, icon, map, marker, tileLayer } from 'leaflet';\nimport { LiveLocationService } from 'src/app/services/live-location.service';\nimport { Order } from 'src/app/shared/models/Order';\n\n@Component({\n  selector: 'app-map',\n  templateUrl: './map.component.html',\n  styleUrls: ['./map.component.css']\n})\nexport class MapComponent  implements OnInit{\n\n@ViewChild('map',{static:true}) mapRef!:ElementRef\n\n@Input(\"order\")order!:Order\n\nprivate DEFAULTLATLNG:LatLngTuple=[30.0869, 78.2676]\nprivate MARKER_ZOOM=16\n\nprivate readonly MARKER_ICON = icon({\n  iconUrl:\n    '/assets/images/location.png',\n  iconSize: [42, 42],\n  iconAnchor: [21, 42],\n});\n\ncurrentMarker!:Marker;\nmap!:Map\n\nconstructor(private liveLocationService:LiveLocationService){\n\n\n}\n\n  ngOnInit(): void {\n    this.showMap()\n  }\n\n\nshowMap(){\nif(this.map)\nreturn;\n\nthis.map=map(this.mapRef.nativeElement,{\nattributionControl:false\n\n}).setView(this.DEFAULTLATLNG,12)\n\ntileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(this.map)\nthis.map.on('click', (e:LeafletMouseEvent) => {\n  this.setMarker(e.latlng);\n})\n\n}\n\n\nsearch(){\nthis.liveLocationService.getCurrentLocation().subscribe({\n  next:(latlng)=>{\n    console.log(latlng)\n    \n   this.map.setView(latlng,this.MARKER_ZOOM)\n   this.setMarker(latlng)\n  }\n})\n}\n\n\nsetMarker(latlng:LatLngExpression){\n  this.addressLatLng = latlng as LatLng;\n  if(this.currentMarker)\n  {\n    this.currentMarker.setLatLng(latlng);\n    return;\n  }\n\n  this.currentMarker = marker(latlng, {\n    draggable: true,\n    icon: this.MARKER_ICON\n  }).addTo(this.map);\n\n\n  this.currentMarker.on('dragend', () => {\n    this.addressLatLng = this.currentMarker.getLatLng();\n  })\n}\n\n\n\nset addressLatLng(latlng: LatLng){\n  if(!latlng.lat.toFixed) return;\n\n  latlng.lat = parseFloat(latlng.lat.toFixed(8));\n  latlng.lng = parseFloat(latlng.lng.toFixed(8));\n  this.order.addressLatLng = latlng;\n  console.log(this.order.addressLatLng);\n}\n\n\n}\n","<div class=\"container\" style=\"width: 30rem;height: 20rem; position: relative;\">\n    <button class=\"btn search\" (click)=\"search()\" > Search My Location</button>\n<div  #map class=\"map\" style=\"width: 100%;height: 100%;\">\n\n</div>\n\n\n</div>\n"],"mappings":"AACA,SAAgFA,IAAI,EAAEC,GAAG,EAAEC,MAAM,EAAEC,SAAS,QAAQ,SAAS;;;;AAS7H,OAAM,MAAOC,YAAY;EAmBzBC,YAAoBC,mBAAuC;IAAvC,KAAAA,mBAAmB,GAAnBA,mBAAmB;IAb/B,KAAAC,aAAa,GAAa,CAAC,OAAO,EAAE,OAAO,CAAC;IAC5C,KAAAC,WAAW,GAAC,EAAE;IAEL,KAAAC,WAAW,GAAGT,IAAI,CAAC;MAClCU,OAAO,EACL,6BAA6B;MAC/BC,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;MAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;KACpB,CAAC;EAQF;EAEEC,QAAQA,CAAA;IACN,IAAI,CAACC,OAAO,EAAE;EAChB;EAGFA,OAAOA,CAAA;IACP,IAAG,IAAI,CAACb,GAAG,EACX;IAEA,IAAI,CAACA,GAAG,GAACA,GAAG,CAAC,IAAI,CAACc,MAAM,CAACC,aAAa,EAAC;MACvCC,kBAAkB,EAAC;KAElB,CAAC,CAACC,OAAO,CAAC,IAAI,CAACX,aAAa,EAAC,EAAE,CAAC;IAEjCJ,SAAS,CAAC,oDAAoD,CAAC,CAACgB,KAAK,CAAC,IAAI,CAAClB,GAAG,CAAC;IAC/E,IAAI,CAACA,GAAG,CAACmB,EAAE,CAAC,OAAO,EAAGC,CAAmB,IAAI;MAC3C,IAAI,CAACC,SAAS,CAACD,CAAC,CAACE,MAAM,CAAC;IAC1B,CAAC,CAAC;EAEF;EAGAC,MAAMA,CAAA;IACN,IAAI,CAAClB,mBAAmB,CAACmB,kBAAkB,EAAE,CAACC,SAAS,CAAC;MACtDC,IAAI,EAAEJ,MAAM,IAAG;QACbK,OAAO,CAACC,GAAG,CAACN,MAAM,CAAC;QAEpB,IAAI,CAACtB,GAAG,CAACiB,OAAO,CAACK,MAAM,EAAC,IAAI,CAACf,WAAW,CAAC;QACzC,IAAI,CAACc,SAAS,CAACC,MAAM,CAAC;MACvB;KACD,CAAC;EACF;EAGAD,SAASA,CAACC,MAAuB;IAC/B,IAAI,CAACO,aAAa,GAAGP,MAAgB;IACrC,IAAG,IAAI,CAACQ,aAAa,EACrB;MACE,IAAI,CAACA,aAAa,CAACC,SAAS,CAACT,MAAM,CAAC;MACpC;;IAGF,IAAI,CAACQ,aAAa,GAAG7B,MAAM,CAACqB,MAAM,EAAE;MAClCU,SAAS,EAAE,IAAI;MACfjC,IAAI,EAAE,IAAI,CAACS;KACZ,CAAC,CAACU,KAAK,CAAC,IAAI,CAAClB,GAAG,CAAC;IAGlB,IAAI,CAAC8B,aAAa,CAACX,EAAE,CAAC,SAAS,EAAE,MAAK;MACpC,IAAI,CAACU,aAAa,GAAG,IAAI,CAACC,aAAa,CAACG,SAAS,EAAE;IACrD,CAAC,CAAC;EACJ;EAIA,IAAIJ,aAAaA,CAACP,MAAc;IAC9B,IAAG,CAACA,MAAM,CAACY,GAAG,CAACC,OAAO,EAAE;IAExBb,MAAM,CAACY,GAAG,GAAGE,UAAU,CAACd,MAAM,CAACY,GAAG,CAACC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC9Cb,MAAM,CAACe,GAAG,GAAGD,UAAU,CAACd,MAAM,CAACe,GAAG,CAACF,OAAO,CAAC,CAAC,CAAC,CAAC;IAC9C,IAAI,CAACG,KAAK,CAACT,aAAa,GAAGP,MAAM;IACjCK,OAAO,CAACC,GAAG,CAAC,IAAI,CAACU,KAAK,CAACT,aAAa,CAAC;EACvC;;AAtFa1B,YAAY,C;mBAAZA,YAAY,EAAAoC,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,mBAAA;AAAA;AAAZvC,YAAY,C;QAAZA,YAAY;EAAAwC,SAAA;EAAAC,SAAA,WAAAC,mBAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;;;;;;;;;;;;;;;;MCVzBP,EAAA,CAAAS,cAAA,aAA+E;MAChDT,EAAA,CAAAU,UAAA,mBAAAC,8CAAA;QAAA,OAASH,GAAA,CAAAxB,MAAA,EAAQ;MAAA,EAAC;MAAGgB,EAAA,CAAAY,MAAA,0BAAkB;MAAAZ,EAAA,CAAAa,YAAA,EAAS;MAC/Eb,EAAA,CAAAc,SAAA,gBAEM;MAGNd,EAAA,CAAAa,YAAA,EAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}